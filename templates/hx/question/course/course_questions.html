<div id="question-nav" class="container pt-3">
    <div class="pt-3">
        <div class="input-group rounded">
            <input hx-post="{% url 'question:search' course.id %}" hx-target="#question"
                   hx-trigger="keyup changed delay:500ms"
                   type="search" class="form-control rounded" name="search"
                   placeholder="Pesquisar" aria-label="Search" aria-describedby="search-addon"/>
            <span class="input-group-text border-0" id="search-addon">
               <i class="bi bi-search"></i>
            </span>
        </div>
        <div class="d-flex justify-content-between pt-3">
            <div class="btn-group">
                <button type="button" class="btn btn-dark dropdown-toggle" data-bs-toggle="dropdown">
                    Todas as aulas
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <a class="dropdown-item"
                           hx-get="{% url 'question_filter:course_all' course.id %}"
                           hx-target="#question">
                            Todas as aulas
                        </a>
                    </li>
                    <li>
                        <a id="question-lesson" class="dropdown-item">
                            Aula atual
                        </a>
                    </li>
                </ul>
            </div>
            <div class="btn-group">
                <button type="button" class="btn btn-dark dropdown-toggle" data-bs-toggle="dropdown">
                    Filtrar perguntas
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <a class="dropdown-item"
                           hx-get="{% url 'question_filter:i_ask' course.id %}"
                           hx-target="#question">
                            Perguntas que eu fiz
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item"
                           hx-get="{% url 'question_filter:more_answers' course.id %}"
                           hx-target="#question">
                            Perguntas com mais respostas
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item"
                           hx-get="{% url 'question_filter:more_recent' course.id %}"
                           hx-target="#question">
                            Perguntas mais recentes
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item"
                           hx-get="{% url 'question_filter:without_answer' course.id %}"
                           hx-target="#question">
                            Perguntas sem respostas
                        </a>
                    </li>
                </ul>
            </div>
            <div>
                <button class="btn btn-dark"
                        hx-get="{% url 'question:create' course.id %}"
                        hx-target="#question-nav">
                    Fazer uma pergunta
                </button>
            </div>
        </div>
    </div>
    <div id="question" class="pt-3">
        {% include 'hx/question/course/course_all_questions.html' %}
    </div>
</div>

{% block javascript %}
    <script>
        document.getElementById('question-lesson').addEventListener('click', () => {
            htmx.ajax('GET', `/course/question/filter/lesson/${document.lesson_id}/`, '#question')
        })
    </script>
{% endblock %}